<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SolScout — Solana Narrative Report</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        solana: { purple: '#9945FF', green: '#14F195' }
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', system-ui, sans-serif; }
        .gradient-text {
            background: linear-gradient(135deg, #9945FF, #14F195);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>
<body class="bg-gray-950 text-gray-100 min-h-screen">
    <!-- Header -->
    <header class="border-b border-gray-800 px-6 py-4">
        <div class="max-w-6xl mx-auto flex items-center justify-between">
            <div>
                <h1 class="text-2xl font-bold gradient-text">SolScout</h1>
                <p class="text-gray-400 text-sm">Solana Narrative Detection &amp; Idea Generation</p>
            </div>
            <div class="text-right text-sm text-gray-500">
                <p>Generated: {{ generated_at }}</p>
                <p>{{ total_signals }} signals from {{ source_count }} sources</p>
            </div>
        </div>
    </header>

    <!-- Refresh metadata bar -->
    <div class="bg-gray-900/50 border-b border-gray-800 px-6 py-2">
        <div class="max-w-6xl mx-auto flex items-center gap-4 text-xs text-gray-500">
            <span>Last refreshed: <span class="text-gray-400">{{ generated_at }}</span></span>
            <span class="text-gray-700">|</span>
            <span>Next refresh: 1st &amp; 15th of each month</span>
            <span class="text-gray-700">|</span>
            <span>{{ total_signals }} signals across {{ source_count }} sources</span>
        </div>
    </div>

    <main class="max-w-6xl mx-auto px-6 py-8 space-y-12">

        <!-- Executive Summary -->
        <section class="bg-gray-900 rounded-lg p-6 border border-gray-800">
            <h2 class="text-xl font-bold mb-4 text-gray-200">Executive Summary</h2>
            <p class="text-gray-400 mb-4">
                SolScout detected <strong class="text-gray-200">{{ narratives.len() }}</strong> emerging narratives
                from <strong class="text-gray-200">{{ total_signals }}</strong> signals across
                <strong class="text-gray-200">{{ source_count }}</strong> data sources.
                {% if narratives.len() > 0 %}
                Top narrative by confidence: <strong class="text-solana-green">{{ narratives[0].title }}</strong>
                ({{ narratives[0].confidence_pct }}% confidence).
                {% endif %}
            </p>
            <div class="border-t border-gray-800 pt-4">
                <h3 class="text-sm font-semibold text-gray-400 mb-2">Methodology</h3>
                <p class="text-sm text-gray-500">
                    Signals are gathered from GitHub (repository activity, star velocity), Solana RPC (TPS, epoch data,
                    program activity), DeFiLlama (TVL, protocol metrics), and ecosystem blogs (article scraping).
                    Raw signals are grouped by category and passed to an LLM for narrative synthesis.
                    Confidence scores reflect multi-source corroboration and signal strength.
                </p>
            </div>
        </section>

        <!-- Stats Strip -->
        <div class="grid grid-cols-3 gap-4">
            <div class="bg-gray-900 rounded-lg p-4 border border-gray-800">
                <p class="text-3xl font-bold text-solana-green">{{ narratives.len() }}</p>
                <p class="text-gray-400 text-sm">Narratives Detected</p>
            </div>
            <div class="bg-gray-900 rounded-lg p-4 border border-gray-800">
                <p class="text-3xl font-bold text-solana-purple">{{ build_ideas.len() }}</p>
                <p class="text-gray-400 text-sm">Build Ideas</p>
            </div>
            <div class="bg-gray-900 rounded-lg p-4 border border-gray-800">
                <p class="text-3xl font-bold text-blue-400">{{ total_signals }}</p>
                <p class="text-gray-400 text-sm">Data Signals</p>
            </div>
        </div>

        <!-- Narratives -->
        <section>
            <h2 class="text-xl font-bold mb-6 text-gray-200">Emerging Narratives</h2>
            <div class="space-y-6">
                {% for n in narratives %}
                <div class="bg-gray-900 rounded-lg p-6 border border-gray-800">
                    <div class="flex items-start justify-between mb-3">
                        <h3 class="text-lg font-semibold text-gray-100">{{ n.title }}</h3>
                        <div class="flex items-center gap-3 text-sm shrink-0 ml-4">
                            <span class="{{ n.trend_class }} font-medium">{{ n.trend }}</span>
                            <span class="bg-gray-800 px-2 py-1 rounded text-gray-300">{{ n.confidence_pct }}% confidence</span>
                        </div>
                    </div>
                    <p class="text-gray-400 mb-4">{{ n.summary }}</p>
                    <div class="flex flex-wrap gap-2">
                        {% for m in n.metrics %}
                        <span class="bg-gray-800 text-gray-300 px-2 py-1 rounded text-xs">{{ m }}</span>
                        {% endfor %}
                        <span class="bg-gray-800 text-gray-500 px-2 py-1 rounded text-xs">{{ n.signal_count }} supporting signals</span>
                        <span class="bg-gray-800 text-gray-500 px-2 py-1 rounded text-xs">{{ n.source_diversity }}/{{ n.total_sources }} sources</span>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- Build Ideas -->
        <section>
            <h2 class="text-xl font-bold mb-6 text-gray-200">Build Ideas</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                {% for idea in build_ideas %}
                <div class="bg-gray-900 rounded-lg p-5 border border-gray-800">
                    <div class="flex items-center gap-2 mb-2">
                        <span class="text-xs bg-solana-purple/20 text-solana-purple px-2 py-0.5 rounded">{{ idea.narrative_title }}</span>
                    </div>
                    <h3 class="font-semibold text-gray-100 mb-2">{{ idea.title }}</h3>
                    <p class="text-gray-400 text-sm mb-3">{{ idea.description }}</p>
                    <div class="space-y-2 text-sm">
                        <div><span class="text-gray-500">Target:</span> <span class="text-gray-300">{{ idea.target_user }}</span></div>
                        <div><span class="text-gray-500">MVP Scope:</span> <span class="text-gray-300">{{ idea.mvp_scope }}</span></div>
                        <div><span class="text-gray-500">Landscape:</span> <span class="text-gray-300">{{ idea.competitive_landscape }}</span></div>
                        <div><span class="text-gray-500">Timing:</span> <span class="text-gray-300">{{ idea.timing_rationale }}</span></div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- Raw Signals -->
        <section>
            <h2 class="text-xl font-bold mb-6 text-gray-200">
                Raw Signals
                <span class="text-sm font-normal text-gray-500">({{ signals.len() }} total)</span>
            </h2>
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead>
                        <tr class="border-b border-gray-800 text-gray-400">
                            <th class="text-left py-2 px-3">Source</th>
                            <th class="text-left py-2 px-3">Category</th>
                            <th class="text-left py-2 px-3">Signal</th>
                            <th class="text-left py-2 px-3">Key Metrics</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for s in signals %}
                        <tr class="border-b border-gray-800/50 hover:bg-gray-900/50">
                            <td class="py-2 px-3 text-gray-500">{{ s.source }}</td>
                            <td class="py-2 px-3 text-gray-400">{{ s.category }}</td>
                            <td class="py-2 px-3">
                                {% if s.url.is_empty() %}
                                    {{ s.title }}
                                {% else %}
                                    <a href="{{ s.url }}" class="text-blue-400 hover:underline" target="_blank">{{ s.title }}</a>
                                {% endif %}
                            </td>
                            <td class="py-2 px-3 text-gray-500">
                                {% for m in s.metrics %}
                                <span class="inline-block bg-gray-800 px-1.5 py-0.5 rounded text-xs mr-1 mb-1">{{ m }}</span>
                                {% endfor %}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </section>
    </main>

    <footer class="border-t border-gray-800 px-6 py-4 mt-12">
        <div class="max-w-6xl mx-auto text-center text-gray-600 text-sm">
            <p>Generated by <span class="gradient-text font-semibold">SolScout</span> — autonomous Solana ecosystem intelligence</p>
            <p class="mt-1">Data sources: GitHub API, Solana RPC (Helius), ecosystem blogs | LLM-powered analysis</p>
        </div>
    </footer>
</body>
</html>
